#remotes::install_github("fisw10/BHPMF")
library(BHPMF)
setwd("C:/Users/dcol2804/gap-filling")
# Load packages
library(austraits)
library(tidyverse)
library(dplyr)
# Load austraits
austraits <- load_austraits(path="data/austraits", version = "4.1.0")
# Load the csv file with the traits you would like to model
x = read.csv("BHPMF/input_data/trait_list.csv")
# Load austraits
austraits <- load_austraits(path="austraits_database/austraits", version = "4.1.0")
# Filter to just the traits you want
aus = austraits$traits %>% filter(trait_name %in% x$traits) %>% rename(trait_value = value)
# get number of known taxa
taxa = aus %>% select(taxon_name, trait_name) %>% unique() %>% group_by(trait_name) %>% summarise(n = n())
# check to see if the traits you want are written correctly in the spreadsheet
x$traits[!x$traits %in% unique(aus$trait_name)]
# Add on the taxonomic information to only select species level taxa
aus = aus %>% left_join(austraits$taxa %>% select(taxon_rank, taxon_name, genus, family))
aus = aus %>% filter(taxon_rank == "Species")
aus = aus %>% filter(!trait_name %in% unique(names(x)))
View(aus)
